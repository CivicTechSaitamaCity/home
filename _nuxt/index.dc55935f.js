const l=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,a=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,d=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function h(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){N(t);return}return e}function N(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function w(t,e={}){if(typeof t!="string")return t;const s=t.trim();if(t[0]==='"'&&t[t.length-1]==='"')return s.slice(1,-1);if(s.length<=9){const r=s.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!d.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(l.test(t)||a.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,h)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const y=/\d/,I=["-","_","/","."];function S(t=""){if(!y.test(t))return t.toUpperCase()===t}function E(t,e){const s=e??I,r=[];if(!t||typeof t!="string")return r;let n="",o,f;for(const i of t){const p=s.includes(i);if(p===!0){r.push(n),n="",o=void 0;continue}const u=S(i);if(f===!1){if(o===!1&&u===!0){r.push(n),n=i,o=u;continue}if(o===!0&&u===!1&&n.length>1){const c=n[n.length-1];r.push(n.slice(0,Math.max(0,n.length-1))),n=c+i,o=u;continue}}n+=i,o=u,f=p}return r.push(n),r}function F(t){return t?t[0].toUpperCase()+t.slice(1):""}function C(t){return t?(Array.isArray(t)?t:E(t)).map(e=>F(e)).join(""):""}export{w as d,C as p};
